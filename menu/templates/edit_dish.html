{% extends 'layout.html' %}
{% load widget_tweaks %}

{% block title %}Edit {{ dish.name }} - TasteMate{% endblock %}

{% block content %}
<style>
  body { font-family: 'Poppins', sans-serif; background-color: #f8f9fa; }

  /* Main Container */
  .edit-dish-container {
    min-height: 90vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4rem 1rem;
    background: linear-gradient(135deg, #fff0f2 0%, #fdf7f0 100%);
  }

  /* Card Styling */
  .edit-card {
    background: #ffffff;
    border-radius: 25px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.08);
    overflow: hidden;
    width: 100%;
    max-width: 550px;
    animation: fadeInUp 0.8s ease-in-out;
  }

  .edit-card .card-header {
    background: linear-gradient(90deg, #FF6F61, #FF9472);
    color: #fff;
    font-weight: 700;
    border-top-left-radius: 25px;
    border-top-right-radius: 25px;
    padding: 1.5rem 2rem;
    text-align: center;
  }

  /* Form Inputs */
  .form-label { font-weight: 600; color: #34495E; }
  .form-control, .form-select {
    border-radius: 12px;
    padding: 12px 14px;
    border: 1px solid #ced4da;
    transition: all 0.3s;
  }
  .form-control:focus, .form-select:focus {
    border-color: #FF6F61;
    box-shadow: 0 0 0 0.2rem rgba(255,111,97,0.25);
  }

  /* Toggle Switch */
  .form-check-input { cursor: pointer; }
  .form-check-label { font-size: 0.9rem; color: #7f8c8d; }

  /* Buttons */
  .btn-primary {
    background: linear-gradient(90deg, #FF6F61, #FF9472);
    border: none;
    transition: all 0.3s;
  }
  .btn-primary:hover {
    background: linear-gradient(90deg, #FF9472, #FF6F61);
  }
  .btn-secondary {
    background: #bdc3c7;
    border: none;
  }

  /* Animations */
  @keyframes fadeInUp {
    0% { opacity: 0; transform: translateY(30px); }
    100% { opacity: 1; transform: translateY(0); }
  }
</style>

<div class="edit-dish-container">
  <div class="edit-card">
    <div class="card-header">
      <h4>Edit "{{ dish.name }}"</h4>
    </div>
    <div class="card-body p-4 p-md-5">
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.non_field_errors }}

        {% for field in form %}
          <div class="mb-3">
            <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>

            {% if field.name == 'is_veg' or field.name == 'available' %}
              <div class="form-check form-switch mt-1">
                {% render_field field class="form-check-input" %}
                <label class="form-check-label" for="{{ field.id_for_label }}">{{ field.help_text }}</label>
              </div>
            {% else %}
              {% render_field field class="form-control" %}
            {% endif %}

            {% for error in field.errors %}
              <div class="text-danger small mt-1">{{ error }}</div>
            {% endfor %}
          </div>
        {% endfor %}

        <div class="d-flex justify-content-between align-items-center mt-4">
          <a href="{% url 'canteen_dashboard' %}" class="btn btn-secondary rounded-pill px-4">Cancel</a>
          <button type="submit" class="btn btn-primary rounded-pill px-4">Update Dish</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
